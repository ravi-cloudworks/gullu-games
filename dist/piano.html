<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>üéπ Finger Piano!</title><link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;800&family=Nunito:wght@700;900&display=swap" rel="stylesheet"><style>*{margin:0;padding:0;box-sizing:border-box}:root{--bg:#0a0e2e;--purple:#a855f7;--pink:#ec4899;--yellow:#FFD93D;--mint:#43E97B;--blue:#38bdf8;--orange:#FF9A3C}body{font-family:'Baloo 2',cursive;background:var(--bg);overflow:hidden;height:100vh;width:100vw;user-select:none}#video{position:fixed;inset:0;width:100%;height:100%;object-fit:cover;transform:scaleX(-1);opacity:0;transition:opacity 1s}#video.visible{opacity:1}#canvas{position:fixed;inset:0;width:100%;height:100%}#hud{position:fixed;top:0;left:0;right:0;display:flex;align-items:center;justify-content:space-between;padding:12px 20px;background:linear-gradient(180deg,rgba(10,14,46,.88) 0,transparent 100%);z-index:10;pointer-events:none}.hud-score{display:flex;align-items:center;gap:8px}.hud-score span{font-size:clamp(13px,2vw,18px);color:rgba(255,255,255,.7);font-weight:700;font-family:Nunito,sans-serif;text-transform:uppercase;letter-spacing:1px}.score-val{font-size:clamp(26px,5vw,44px)!important;font-weight:800!important;color:var(--yellow)!important;text-shadow:0 0 18px rgba(255,217,61,.8);letter-spacing:-1px!important;font-family:'Baloo 2',cursive!important}.hud-timer{display:flex;align-items:center;gap:7px}.timer-val{font-size:clamp(26px,5vw,44px);font-weight:800;color:#fff;font-family:'Baloo 2',cursive;min-width:72px;text-align:center}.timer-val.urgent{color:#ff4d4d;animation:urgentPulse .5s ease-in-out infinite}@keyframes urgentPulse{0%,100%{transform:scale(1)}50%{transform:scale(1.15)}}.timer-label{font-size:clamp(11px,1.8vw,15px);color:rgba(255,255,255,.6);font-family:Nunito,sans-serif;font-weight:700;text-transform:uppercase;letter-spacing:1px}.encourage-badge{background:linear-gradient(135deg,var(--mint),#38f9d7);color:#0a2e18;padding:5px 16px;border-radius:28px;font-size:clamp(12px,1.8vw,15px);font-weight:800;box-shadow:0 4px 14px rgba(67,233,123,.5)}#countdown{display:none;position:fixed;inset:0;background:rgba(10,14,46,.7);flex-direction:column;align-items:center;justify-content:center;z-index:25;backdrop-filter:blur(4px)}#countdown.show{display:flex}#countNum{font-size:clamp(100px,20vw,180px);font-weight:800;color:#fff;line-height:1;animation:countPop .5s cubic-bezier(.34,1.56,.64,1);text-shadow:0 0 60px rgba(67,233,123,.8)}@keyframes countPop{from{transform:scale(2);opacity:0}to{transform:scale(1);opacity:1}}#countdown p{font-family:Nunito,sans-serif;font-size:clamp(16px,3vw,24px);color:rgba(255,255,255,.7);font-weight:700;margin-top:10px}#loading{position:fixed;inset:0;background:rgba(10,14,46,.97);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:18px;z-index:20}#loading h2{color:#fff;font-size:clamp(22px,4vw,32px);font-weight:800}#loading p{color:rgba(255,255,255,.6);font-family:Nunito,sans-serif;font-size:clamp(13px,2vw,18px);font-weight:700;text-align:center;padding:0 20px}.spinner{width:56px;height:56px;border:4px solid rgba(67,233,123,.2);border-top-color:#43e97b;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}#gameover{display:none;position:fixed;inset:0;background:rgba(10,14,46,.92);flex-direction:column;align-items:center;justify-content:center;z-index:30;gap:14px;backdrop-filter:blur(8px)}#gameover.show{display:flex}@keyframes goBounce{0%,100%{transform:translateY(0) rotate(-5deg)}50%{transform:translateY(-18px) rotate(5deg)}}#gameover .go-emoji{font-size:clamp(60px,10vw,90px);animation:goBounce 1.5s ease-in-out infinite}#gameover h2{font-size:clamp(28px,5.5vw,56px);font-weight:800;background:linear-gradient(135deg,var(--mint),var(--blue));-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.go-score-wrap{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.15);border-radius:22px;padding:18px 44px;text-align:center}.go-score-label{color:rgba(255,255,255,.5);font-family:Nunito;font-size:13px;font-weight:700;letter-spacing:2px;text-transform:uppercase}.go-score-num{font-size:clamp(44px,8vw,76px);font-weight:800;color:var(--mint);text-shadow:0 0 36px rgba(67,233,123,.6);line-height:1}.go-score-msg{color:rgba(255,255,255,.5);font-family:Nunito;font-size:14px;font-weight:700;margin-top:4px}.go-buttons{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;margin-top:6px}.go-btn{padding:14px 36px;border-radius:50px;border:none;font-family:'Baloo 2',cursive;font-size:clamp(15px,2.5vw,19px);font-weight:800;cursor:pointer;transition:transform .2s,box-shadow .2s}.go-btn:hover{transform:scale(1.06)}.go-btn:active{transform:scale(.96)}.go-btn-play{background:linear-gradient(135deg,#43e97b,#38f9d7);color:#0a2e18;box-shadow:0 6px 28px rgba(67,233,123,.5)}.go-btn-home{background:rgba(255,255,255,.1);color:#fff;border:1px solid rgba(255,255,255,.2)}#backBtn{position:fixed;top:12px;right:12px;padding:9px 18px;border-radius:40px;border:1px solid rgba(255,255,255,.2);background:rgba(0,0,0,.4);color:rgba(255,255,255,.6);font-family:'Baloo 2',cursive;font-size:13px;font-weight:700;cursor:pointer;z-index:10;transition:all .2s;pointer-events:auto}#backBtn:hover{background:rgba(0,0,0,.7);color:#fff}#permError{display:none;position:fixed;inset:0;background:rgba(10,14,46,.97);flex-direction:column;align-items:center;justify-content:center;gap:14px;z-index:25;text-align:center;padding:28px}#permError.show{display:flex}#permError .pe-icon{font-size:56px}#permError h2{color:#fff;font-size:clamp(20px,4vw,28px);font-weight:800}#permError p{color:rgba(255,255,255,.6);font-family:Nunito;font-size:clamp(13px,2vw,16px);font-weight:700;max-width:400px;line-height:1.6}#permError button{padding:13px 34px;border-radius:40px;border:none;background:linear-gradient(135deg,#43e97b,#38f9d7);color:#0a2e18;font-family:'Baloo 2';font-size:clamp(15px,2.5vw,18px);font-weight:800;cursor:pointer;margin-top:6px}</style></head><body><video id="video" playsinline autoplay muted></video><canvas id="canvas"></canvas><div id="hud"><div class="hud-score"><span>üéµ</span> <span class="score-val" id="scoreVal">0</span> <span>notes</span></div><div class="hud-timer"><span class="timer-val" id="timerVal">60</span> <span class="timer-label">sec</span></div><div><div class="encourage-badge">Keep Playing! üéπ</div></div></div><button id="backBtn" onclick="goHome()">‚Üê Home</button><div id="countdown"><div id="countNum">3</div><p>Get ready to play! üéπ</p></div><div id="loading"><div class="spinner"></div><h2>üéπ Getting Ready...</h2><p id="loadingMsg">Starting your webcam...</p></div><div id="permError"><div class="pe-icon">üì∑</div><h2>Camera Needed!</h2><p>We need your webcam to detect your hand movements. Please allow camera access and try again!</p><button onclick="retryCamera()">Try Again üì∑</button></div><div id="gameover"><div class="go-emoji" id="goEmoji">üèÜ</div><h2>Beautiful Music!</h2><div class="go-score-wrap"><div class="go-score-label">Notes Played</div><div class="go-score-num" id="finalScore">0</div><div class="go-score-msg" id="finalMsg"></div></div><div class="go-buttons"><button class="go-btn go-btn-play" onclick="restartGame()">üîÑ Play Again!</button> <button class="go-btn go-btn-home" onclick="goHome()">üè† Home</button></div></div><script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@mediapipe/hands/hands.js" crossorigin="anonymous"></script><script>const GAME_DURATION=60,INDEX_TIP=8,HAND_COLORS=["#e879f9","#38bdf8"],NOTE_FREQS={C3:130.81,D3:146.83,E3:164.81,F3:174.61,G3:196,A3:220,B3:246.94,C4:261.63,D4:293.66,E4:329.63,F4:349.23,G4:392,A4:440,B4:493.88,C5:523.25,"C#3":138.59,"D#3":155.56,"F#3":185,"G#3":207.65,"A#3":233.08,"C#4":277.18,"D#4":311.13,"F#4":369.99,"G#4":415.3,"A#4":466.16},WHITE_NOTES=["C3","D3","E3","F3","G3","A3","B3","C4","D4","E4","F4","G4","A4","B4","C5"],BLACK_KEYS_DEF=[{note:"C#3",lwi:0},{note:"D#3",lwi:1},{note:"F#3",lwi:3},{note:"G#3",lwi:4},{note:"A#3",lwi:5},{note:"C#4",lwi:7},{note:"D#4",lwi:8},{note:"F#4",lwi:10},{note:"G#4",lwi:11},{note:"A#4",lwi:12}],HAND_CONNECTIONS=[[0,1],[1,2],[2,3],[3,4],[0,5],[5,6],[6,7],[7,8],[5,9],[9,10],[10,11],[11,12],[9,13],[13,14],[14,15],[15,16],[13,17],[17,18],[18,19],[19,20],[0,17]];let keys=[],keyPressTimes={},handLandmarks=[],scorePops=[],bgStars=[],score=0,timeLeft=60,gameActive=!1,gameTimer=null,animFrame=null,hands=null,mpCamera=null,audioCtx=null,activeNotes=[null,null];const video=document.getElementById("video"),canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");class ScorePop{constructor(e,t,a){this.x=e,this.y=t,this.text=a,this.alpha=1,this.vy=-2.4,this.scale=.4}update(){this.y+=this.vy,this.vy*=.93,this.alpha-=.022,this.scale=Math.min(1.2,this.scale+.1)}draw(e){this.alpha<=0||(e.save(),e.globalAlpha=this.alpha,e.translate(this.x,this.y),e.scale(this.scale,this.scale),e.font='bold 32px "Baloo 2",cursive',e.textAlign="center",e.textBaseline="middle",e.strokeStyle="rgba(0,0,0,0.5)",e.lineWidth=5,e.strokeText(this.text,0,0),e.fillStyle="#FFD93D",e.fillText(this.text,0,0),e.restore())}}function buildKeys(){const e=canvas.width,t=canvas.height,a=e/15,n=.22*t,i=.6*a,o=.62*n,s=.78*t;keys=[],WHITE_NOTES.forEach((e,t)=>{keys.push({note:e,x:t*a,y:s,w:a,h:n,isBlack:!1,pressed:!1})}),BLACK_KEYS_DEF.forEach(({note:e,lwi:t})=>{const n=(t+1)*a;keys.push({note:e,x:n-.5*i,y:s,w:i,h:o,isBlack:!0,pressed:!1})})}function drawPiano(){Date.now();keys.filter(e=>!e.isBlack).forEach(e=>{ctx.save(),e.pressed?(ctx.shadowColor="#FFD93D",ctx.shadowBlur=22,ctx.fillStyle="#fffac0"):ctx.fillStyle="rgba(255,255,255,0.92)",ctx.fillRect(e.x+1.5,e.y,e.w-3,e.h),ctx.shadowBlur=0,ctx.strokeStyle="rgba(30,30,60,0.5)",ctx.lineWidth=1.5,ctx.strokeRect(e.x+1.5,e.y,e.w-3,e.h);const t=e.note.replace(/\d/,""),a=Math.max(9,Math.min(14,.38*e.w));ctx.font=`bold ${a}px "Baloo 2",cursive`,ctx.textAlign="center",ctx.textBaseline="bottom",ctx.fillStyle=e.pressed?"#c47d00":"rgba(0,0,0,0.32)",ctx.fillText(t,e.x+e.w/2,e.y+e.h-5),ctx.restore()}),keys.filter(e=>e.isBlack).forEach(e=>{ctx.save(),e.pressed?(ctx.shadowColor="#a855f7",ctx.shadowBlur=20,ctx.fillStyle="#5b21b6"):ctx.fillStyle="rgba(12,12,30,0.95)",ctx.fillRect(e.x,e.y,e.w,e.h),e.pressed||(ctx.fillStyle="rgba(255,255,255,0.1)",ctx.fillRect(e.x+2,e.y,e.w-4,.28*e.h)),ctx.restore()}),ctx.save();const e=keys.find(e=>!e.isBlack)?.y??.78*canvas.height,t=ctx.createLinearGradient(0,e-12,0,e);t.addColorStop(0,"rgba(0,0,0,0)"),t.addColorStop(1,"rgba(0,0,0,0.45)"),ctx.fillStyle=t,ctx.fillRect(0,e-12,canvas.width,12),ctx.restore()}function drawHandSkeleton(){if(!handLandmarks.length)return;const e=canvas.width,t=canvas.height;handLandmarks.forEach((a,n)=>{const i=HAND_COLORS[n]||HAND_COLORS[0];ctx.save(),HAND_CONNECTIONS.forEach(([n,i])=>{const o=a[n],s=a[i],c=(1-o.x)*e,r=o.y*t,l=(1-s.x)*e,d=s.y*t;ctx.beginPath(),ctx.moveTo(c,r),ctx.lineTo(l,d),ctx.strokeStyle="rgba(168,85,247,0.45)",ctx.lineWidth=2,ctx.lineCap="round",ctx.stroke()}),ctx.restore(),a.forEach((a,n)=>{if(8===n)return;const i=(1-a.x)*e,o=a.y*t;ctx.beginPath(),ctx.arc(i,o,4,0,2*Math.PI),ctx.fillStyle="rgba(168,85,247,0.55)",ctx.fill()});const o=a[8],s=(1-o.x)*e,c=o.y*t,r=ctx.createRadialGradient(s,c,0,s,c,24);r.addColorStop(0,i),r.addColorStop(.5,i+"aa"),r.addColorStop(1,"transparent"),ctx.beginPath(),ctx.arc(s,c,24,0,2*Math.PI),ctx.fillStyle=r,ctx.fill(),ctx.beginPath(),ctx.arc(s,c,9,0,2*Math.PI),ctx.fillStyle=i,ctx.fill()})}function checkKeyHit(e,t,a){const n=Date.now();for(const i of keys.filter(e=>e.isBlack))if(e>=i.x&&e<=i.x+i.w&&t>=i.y){if(n-(keyPressTimes[i.note]||0)>400)return keyPressTimes[i.note]=n,void triggerKey(i,a)}for(const i of keys.filter(e=>!e.isBlack))if(e>=i.x&&e<=i.x+i.w&&t>=i.y){if(n-(keyPressTimes[i.note]||0)>400)return keyPressTimes[i.note]=n,void triggerKey(i,a)}}function triggerKey(e,t){e.pressed=!0,setTimeout(()=>{e.pressed=!1},320),playNote(e.note,t),score++,document.getElementById("scoreVal").textContent=score,scorePops.push(new ScorePop(e.x+e.w/2,e.y-16,"+1 üéµ"))}function playNote(e,t){const a=NOTE_FREQS[e];if(a)try{audioCtx||(audioCtx=new(window.AudioContext||window.webkitAudioContext));const e=audioCtx.currentTime,n=activeNotes[t];n&&(n.gain.cancelScheduledValues(e),n.gain.setValueAtTime(.3,e),n.gain.linearRampToValueAtTime(0,e+.08),n.osc1.stop(e+.1),n.osc2.stop(e+.1),activeNotes[t]=null);const i=audioCtx.createOscillator(),o=audioCtx.createOscillator(),s=audioCtx.createGain(),c=audioCtx.createGain();i.type="sine",i.frequency.setValueAtTime(a,e),o.type="sine",o.frequency.setValueAtTime(2*a,e),s.gain.setValueAtTime(.5,e),i.connect(c),o.connect(s),s.connect(c),c.connect(audioCtx.destination),c.gain.setValueAtTime(0,e),c.gain.linearRampToValueAtTime(.5,e+.01),c.gain.linearRampToValueAtTime(.3,e+.09),c.gain.setValueAtTime(.3,e+1.5),c.gain.linearRampToValueAtTime(0,e+2.7),i.start(e),o.start(e),i.stop(e+2.7),o.stop(e+2.7);const r={gain:c,osc1:i,osc2:o};activeNotes[t]=r,setTimeout(()=>{activeNotes[t]===r&&(activeNotes[t]=null)},2800)}catch(e){console.error(e)}}function initBgStars(){bgStars=[];for(let e=0;e<40;e++)bgStars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height*.75,r:2*Math.random()+.4,a:Math.random(),s:.012*Math.random()+.004})}function onHandResults(e){gameActive&&(handLandmarks=e.multiHandLandmarks||[],handLandmarks.forEach((e,t)=>{const a=e[8];checkKeyHit((1-a.x)*canvas.width,a.y*canvas.height,t)}))}function initHands(){hands=new Hands({locateFile:e=>`https://cdn.jsdelivr.net/npm/@mediapipe/hands/${e}`}),hands.setOptions({maxNumHands:2,modelComplexity:1,minDetectionConfidence:.7,minTrackingConfidence:.5}),hands.onResults(onHandResults)}function gameLoop(){if(!gameActive)return;animFrame=requestAnimationFrame(gameLoop);const e=canvas.width,t=canvas.height;ctx.clearRect(0,0,e,t),ctx.fillStyle="rgba(10,14,46,0.18)",ctx.fillRect(0,0,e,t),bgStars.forEach(e=>{e.a+=e.s*(Math.random()>.5?1:-1),e.a=Math.max(.04,Math.min(.75,e.a)),ctx.beginPath(),ctx.arc(e.x,e.y,e.r,0,2*Math.PI),ctx.fillStyle=`rgba(255,255,255,${e.a})`,ctx.fill()}),drawPiano(),drawHandSkeleton(),scorePops.forEach(e=>{e.update(),e.draw(ctx)}),scorePops=scorePops.filter(e=>e.alpha>0)}function startTimer(){timeLeft=60,updateTimerEl(),gameTimer=setInterval(()=>{timeLeft--,updateTimerEl(),timeLeft<=0&&endGame()},1e3)}function updateTimerEl(){const e=document.getElementById("timerVal");e.textContent=timeLeft,e.className="timer-val"+(timeLeft<=10?" urgent":"")}function showCountdown(){return new Promise(e=>{const t=document.getElementById("countdown"),a=document.getElementById("countNum");t.classList.add("show");let n=3;a.textContent=n;const i=()=>{n--,n<=0?(a.textContent="GO! üéπ",setTimeout(()=>{t.classList.remove("show"),e()},700)):(a.textContent=n,a.style.animation="none",requestAnimationFrame(()=>requestAnimationFrame(()=>a.style.animation="countPop .5s cubic-bezier(.34,1.56,.64,1)")),setTimeout(i,1e3))};a.style.animation="none",requestAnimationFrame(()=>requestAnimationFrame(()=>a.style.animation="countPop .5s cubic-bezier(.34,1.56,.64,1)")),setTimeout(i,1e3)})}async function setupCamera(){const e=document.getElementById("loadingMsg");try{e.textContent="Starting your webcam...";const t=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720,facingMode:"user"},audio:!1});video.srcObject=t,await new Promise(e=>{video.onloadedmetadata=e}),await video.play(),video.classList.add("visible"),e.textContent="Loading hand tracking AI... ü§ñ",initHands(),mpCamera=new Camera(video,{onFrame:async()=>{hands&&await hands.send({image:video})},width:1280,height:720}),await mpCamera.start(),resizeCanvas(),window.addEventListener("resize",resizeCanvas),e.textContent="Almost ready... üéπ",await new Promise(e=>setTimeout(e,1800)),document.getElementById("loading").style.display="none",await showCountdown(),beginPlay()}catch(e){console.error(e),document.getElementById("loading").style.display="none",document.getElementById("permError").classList.add("show")}}function resizeCanvas(){canvas.width=window.innerWidth,canvas.height=window.innerHeight,initBgStars(),buildKeys()}function beginPlay(){score=0,timeLeft=60,handLandmarks=[],scorePops=[],keyPressTimes={},activeNotes=[null,null],keys.forEach(e=>e.pressed=!1),document.getElementById("scoreVal").textContent="0",document.getElementById("gameover").classList.remove("show"),gameActive=!0,startTimer(),gameLoop()}function endGame(){gameActive=!1,clearInterval(gameTimer),cancelAnimationFrame(animFrame);const e=0===score?0:score<10?1:score<25?2:score<50?3:4;document.getElementById("finalScore").textContent=score,document.getElementById("finalMsg").textContent=["Keep practicing! üéπ","Good start! üéµ","Nice playing! üé∂","Amazing musician! üèÜ","Piano Master! üëë"][e],document.getElementById("goEmoji").textContent=["üòä","üåü","üéâ","üèÜ","üëë"][e],document.getElementById("gameover").classList.add("show")}function restartGame(){document.getElementById("gameover").classList.remove("show"),beginPlay()}function goHome(){window.location.href="index.html"}function retryCamera(){document.getElementById("permError").classList.remove("show"),document.getElementById("loading").style.display="flex",setupCamera()}window.addEventListener("load",()=>{setupCamera()})</script></body></html>