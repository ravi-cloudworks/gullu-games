<!DOCTYPE html><html lang="en"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>üëª Ghost Attack!</title><link href="https://fonts.googleapis.com/css2?family=Baloo+2:wght@400;600;800&family=Nunito:wght@700;900&display=swap" rel="stylesheet"><style>*{margin:0;padding:0;box-sizing:border-box}:root{--bg:#0a0e2e;--purple:#a855f7}body{font-family:'Baloo 2',cursive;background:var(--bg);overflow:hidden;height:100vh;width:100vw;user-select:none}#video{position:fixed;inset:0;width:100%;height:100%;object-fit:cover;transform:scaleX(-1);opacity:0;transition:opacity 1s}#video.visible{opacity:1}#canvas{position:fixed;inset:0;width:100%;height:100%}#hud{position:fixed;top:0;left:0;right:0;display:flex;align-items:center;justify-content:space-between;padding:12px 20px;background:linear-gradient(180deg,rgba(10,14,46,.88) 0,transparent 100%);z-index:10;pointer-events:none}.hud-left{display:flex;align-items:center;gap:8px}.hud-left span{font-size:clamp(13px,2vw,18px);color:rgba(255,255,255,.7);font-weight:700;font-family:Nunito,sans-serif;text-transform:uppercase;letter-spacing:1px}.survive-val{font-size:clamp(26px,5vw,44px)!important;font-weight:800!important;color:#ffd93d!important;text-shadow:0 0 18px rgba(255,217,61,.8);letter-spacing:-1px!important;font-family:'Baloo 2',cursive!important}.speed-badge{background:linear-gradient(135deg,#a855f7,#6366f1);color:#fff;padding:5px 16px;border-radius:28px;font-size:clamp(12px,1.8vw,15px);font-weight:800;box-shadow:0 4px 14px rgba(168,85,247,.5)}#countdown{display:none;position:fixed;inset:0;background:rgba(10,14,46,.7);flex-direction:column;align-items:center;justify-content:center;z-index:25;backdrop-filter:blur(4px)}#countdown.show{display:flex}#countNum{font-size:clamp(100px,20vw,180px);font-weight:800;color:#fff;line-height:1;animation:countPop .5s cubic-bezier(.34,1.56,.64,1);text-shadow:0 0 60px rgba(168,85,247,.8)}@keyframes countPop{from{transform:scale(2);opacity:0}to{transform:scale(1);opacity:1}}#countdown p{font-family:Nunito,sans-serif;font-size:clamp(16px,3vw,24px);color:rgba(255,255,255,.7);font-weight:700;margin-top:10px}#loading{position:fixed;inset:0;background:rgba(10,14,46,.97);display:flex;flex-direction:column;align-items:center;justify-content:center;gap:18px;z-index:20}#loading h2{color:#fff;font-size:clamp(22px,4vw,32px);font-weight:800}#loading p{color:rgba(255,255,255,.6);font-family:Nunito,sans-serif;font-size:clamp(13px,2vw,18px);font-weight:700;text-align:center;padding:0 20px}.spinner{width:56px;height:56px;border:4px solid rgba(168,85,247,.2);border-top-color:#a855f7;border-radius:50%;animation:spin 1s linear infinite}@keyframes spin{to{transform:rotate(360deg)}}#hitFlash{position:fixed;inset:0;pointer-events:none;z-index:15;opacity:0;background:rgba(255,50,50,.55)}#hitFlash.flash{animation:flashAnim .6s ease-out}@keyframes flashAnim{0%{opacity:1}100%{opacity:0}}#youreOut{display:none;position:fixed;inset:0;align-items:center;justify-content:center;z-index:28;pointer-events:none}#youreOut.show{display:flex}#youreOut span{font-size:clamp(52px,11vw,110px);font-weight:800;color:#fff;text-align:center;text-shadow:0 0 50px rgba(255,80,80,.95),0 4px 20px rgba(0,0,0,.6);animation:youreOutAnim 2s ease-out forwards}@keyframes youreOutAnim{0%{opacity:0;transform:scale(.15) rotate(-10deg)}18%{opacity:1;transform:scale(1.18) rotate(3deg)}32%{transform:scale(1) rotate(0)}72%{opacity:1}100%{opacity:0;transform:translateY(-30px) scale(.9)}}#gameover{display:none;position:fixed;inset:0;background:rgba(10,14,46,.92);flex-direction:column;align-items:center;justify-content:center;z-index:30;gap:14px;backdrop-filter:blur(8px)}#gameover.show{display:flex}@keyframes goBounce{0%,100%{transform:translateY(0) rotate(-5deg)}50%{transform:translateY(-18px) rotate(5deg)}}#gameover .go-emoji{font-size:clamp(60px,10vw,90px);animation:goBounce 1.5s ease-in-out infinite}#gameover h2{font-size:clamp(28px,5.5vw,56px);font-weight:800;background:linear-gradient(135deg,#c084fc,#818cf8);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text}.go-score-wrap{background:rgba(255,255,255,.07);border:1px solid rgba(255,255,255,.15);border-radius:22px;padding:18px 44px;text-align:center}.go-score-label{color:rgba(255,255,255,.5);font-family:Nunito;font-size:13px;font-weight:700;letter-spacing:2px;text-transform:uppercase}.go-score-num{font-size:clamp(44px,8vw,76px);font-weight:800;color:#c084fc;text-shadow:0 0 36px rgba(192,132,252,.6);line-height:1}.go-score-msg{color:rgba(255,255,255,.5);font-family:Nunito;font-size:14px;font-weight:700;margin-top:4px}.go-buttons{display:flex;gap:14px;flex-wrap:wrap;justify-content:center;margin-top:6px}.go-btn{padding:14px 36px;border-radius:50px;border:none;font-family:'Baloo 2',cursive;font-size:clamp(15px,2.5vw,19px);font-weight:800;cursor:pointer;transition:transform .2s,box-shadow .2s}.go-btn:hover{transform:scale(1.06)}.go-btn:active{transform:scale(.96)}.go-btn-play{background:linear-gradient(135deg,#a855f7,#6366f1);color:#fff;box-shadow:0 6px 28px rgba(168,85,247,.5)}.go-btn-home{background:rgba(255,255,255,.1);color:#fff;border:1px solid rgba(255,255,255,.2)}#backBtn{position:fixed;top:12px;right:12px;padding:9px 18px;border-radius:40px;border:1px solid rgba(255,255,255,.2);background:rgba(0,0,0,.4);color:rgba(255,255,255,.6);font-family:'Baloo 2',cursive;font-size:13px;font-weight:700;cursor:pointer;z-index:10;transition:all .2s}#backBtn:hover{background:rgba(0,0,0,.7);color:#fff}#permError{display:none;position:fixed;inset:0;background:rgba(10,14,46,.97);flex-direction:column;align-items:center;justify-content:center;gap:14px;z-index:25;text-align:center;padding:28px}#permError.show{display:flex}#permError .pe-icon{font-size:56px}#permError h2{color:#fff;font-size:clamp(20px,4vw,28px);font-weight:800}#permError p{color:rgba(255,255,255,.6);font-family:Nunito;font-size:clamp(13px,2vw,16px);font-weight:700;max-width:400px;line-height:1.6}#permError button{padding:13px 34px;border-radius:40px;border:none;background:linear-gradient(135deg,#a855f7,#6366f1);color:#fff;font-family:'Baloo 2';font-size:clamp(15px,2.5vw,18px);font-weight:800;cursor:pointer;margin-top:6px}</style></head><body><video id="video" playsinline autoplay muted></video><canvas id="canvas"></canvas><div id="hud"><div class="hud-left"><span>üëª</span> <span class="survive-val" id="surviveVal">0</span> <span>sec</span></div><div><div class="speed-badge" id="speedBadge">Speed 1</div></div></div><button id="backBtn" onclick="goHome()">‚Üê Home</button><div id="hitFlash"></div><div id="youreOut"><span>You're Out! üí•</span></div><div id="countdown"><div id="countNum">3</div><p>Dodge the ghosts! üëª</p></div><div id="loading"><div class="spinner"></div><h2>üëª Getting Ready...</h2><p id="loadingMsg">Starting your webcam...</p></div><div id="permError"><div class="pe-icon">üì∑</div><h2>Camera Needed!</h2><p>We need your webcam to detect your face. Please allow camera access and try again!</p><button onclick="retryCamera()">Try Again üì∑</button></div><div id="gameover"><div class="go-emoji" id="goEmoji">üëª</div><h2>Game Over!</h2><div class="go-score-wrap"><div class="go-score-label">Seconds Survived</div><div class="go-score-num" id="finalScore">0</div><div class="go-score-msg" id="finalMsg"></div></div><div class="go-buttons"><button class="go-btn go-btn-play" onclick="restartGame()">üîÑ Play Again!</button> <button class="go-btn go-btn-home" onclick="goHome()">üè† Home</button></div></div><script src="https://cdn.jsdelivr.net/npm/@mediapipe/camera_utils/camera_utils.js" crossorigin="anonymous"></script><script src="https://cdn.jsdelivr.net/npm/@mediapipe/face_detection/face_detection.js" crossorigin="anonymous"></script><script>const GHOST_CONFIGS=[{color:"#a5f3fc",glow:"rgba(165,243,252,0.45)",edge:"left"},{color:"#f9a8d4",glow:"rgba(249,168,212,0.45)",edge:"right"}];class Ghost{constructor(t){this.color=t.color,this.glow=t.glow,this.size=55,this.phase=Math.random()*Math.PI*2,this.vx=0,this.vy=0,this.targetX=canvas.width/2,this.targetY=canvas.height/2,this.spawnAtEdge(t.edge)}spawnAtEdge(t){const e=canvas.width,a=canvas.height;"left"===t&&(this.x=2*-this.size,this.y=.2*a+Math.random()*a*.6),"right"===t&&(this.x=e+2*this.size,this.y=.2*a+Math.random()*a*.6),"top"===t&&(this.x=.2*e+Math.random()*e*.6,this.y=2*-this.size),"bottom"===t&&(this.x=.2*e+Math.random()*e*.6,this.y=a+2*this.size)}update(t,e,a){this.phase+=.045,this.targetX=t,this.targetY=e;const s=t-this.x,i=e-this.y,n=Math.hypot(s,i)||1,o=s/n,r=i/n,c=1.5*Math.sin(1.4*this.phase);this.vx+=.28*o+-r*c*.12,this.vy+=.28*r+o*c*.12;const h=Math.hypot(this.vx,this.vy);h>a&&(this.vx=this.vx/h*a,this.vy=this.vy/h*a),this.x+=this.vx,this.y+=this.vy}hitsFace(t){return!!t&&Math.hypot(this.x-t.x,this.y-t.y)<this.size+t.r}draw(t){const e=8*Math.sin(this.phase);t.save(),t.translate(this.x,this.y+e);const a=this.size,s=t.createRadialGradient(0,0,.2*a,0,0,2.2*a);s.addColorStop(0,this.glow),s.addColorStop(1,"transparent"),t.beginPath(),t.arc(0,0,2.2*a,0,2*Math.PI),t.fillStyle=s,t.fill(),t.beginPath(),t.moveTo(-a,.45*a),t.bezierCurveTo(-a,.35*-a,.5*-a,-a,0,-a),t.bezierCurveTo(.5*a,-a,a,.35*-a,a,.45*a),t.quadraticCurveTo(.78*a,.92*a,.5*a,.55*a),t.quadraticCurveTo(.22*a,.18*a,0,.55*a),t.quadraticCurveTo(.22*-a,.92*a,.5*-a,.55*a),t.quadraticCurveTo(.78*-a,.18*a,-a,.45*a),t.closePath(),t.fillStyle=this.color,t.globalAlpha=.9,t.fill(),t.globalAlpha=1;const i=Math.atan2(this.targetY-(this.y+e),this.targetX-this.x),n=Math.cos(i)*a*.1,o=Math.sin(i)*a*.1;t.beginPath(),t.ellipse(.3*-a,.05*-a,.2*a,.25*a,0,0,2*Math.PI),t.fillStyle="white",t.fill(),t.beginPath(),t.arc(.3*-a+n,.05*-a+o,.11*a,0,2*Math.PI),t.fillStyle="#0a0e2e",t.fill(),t.beginPath(),t.arc(.34*-a+.4*n,.12*-a+.4*o,.04*a,0,2*Math.PI),t.fillStyle="white",t.fill(),t.beginPath(),t.ellipse(.3*a,.05*-a,.2*a,.25*a,0,0,2*Math.PI),t.fillStyle="white",t.fill(),t.beginPath(),t.arc(.3*a+n,.05*-a+o,.11*a,0,2*Math.PI),t.fillStyle="#0a0e2e",t.fill(),t.beginPath(),t.arc(.26*a+.4*n,.12*-a+.4*o,.04*a,0,2*Math.PI),t.fillStyle="white",t.fill(),t.beginPath(),t.ellipse(0,.22*a,.14*a,.11*a,0,0,2*Math.PI),t.fillStyle="#0a0e2e",t.fill(),t.restore()}}class BlastParticle{constructor(t,e){this.x=t,this.y=e,this.vx=22*(Math.random()-.5),this.vy=22*(Math.random()-.5)-4;const a=["#ff4d4d","#ff9a3c","#FFD93D","#c084fc","#f9a8d4","#ff6b9d"];this.color=a[Math.floor(Math.random()*a.length)],this.size=4+14*Math.random(),this.alpha=1,this.isEmoji=Math.random()<.35,this.emoji=["üí•","‚≠ê","‚ú®","üí´","üëª"][Math.floor(5*Math.random())],this.rot=Math.random()*Math.PI*2,this.rotV=.3*(Math.random()-.5)}update(){this.x+=this.vx,this.y+=this.vy,this.vy+=.35,this.alpha-=.022,this.rot+=this.rotV,this.vx*=.97}draw(t){this.alpha<=0||(t.save(),t.globalAlpha=Math.max(0,this.alpha),t.translate(this.x,this.y),t.rotate(this.rot),this.isEmoji?(t.font=3*this.size+"px serif",t.textAlign="center",t.textBaseline="middle",t.fillText(this.emoji,0,0)):(t.beginPath(),t.arc(0,0,this.size,0,2*Math.PI),t.fillStyle=this.color,t.fill()),t.restore())}}let facePos=null,ghosts=[],blastParticles=[],bgStars=[],survivedSeconds=0,gameActive=!1,hitOccurred=!1,surviveTimer=null,animFrame=null,globalPhase=0,faceDetector=null,mpCamera=null;const video=document.getElementById("video"),canvas=document.getElementById("canvas"),ctx=canvas.getContext("2d");function onFaceResults(t){if(!t.detections||0===t.detections.length)return void(facePos=null);const e=t.detections[0],a=canvas.width,s=canvas.height;let i,n;if(e.landmarks&&e.landmarks.length>=2){const t=e.landmarks[0],o=e.landmarks[1];i=(1-(t.x+o.x)/2)*a,n=(t.y+o.y)/2*s}else{const t=e.boundingBox;i=(1-t.xCenter)*a,n=t.yCenter*s}const o=e.boundingBox;facePos={x:i,y:n,r:o.width*a*.38}}function initFaceDetection(){faceDetector=new FaceDetection({locateFile:t=>`https://cdn.jsdelivr.net/npm/@mediapipe/face_detection/${t}`}),faceDetector.setOptions({model:"short",minDetectionConfidence:.6}),faceDetector.onResults(onFaceResults)}function initBgStars(){bgStars=[];for(let t=0;t<45;t++)bgStars.push({x:Math.random()*canvas.width,y:Math.random()*canvas.height,r:2*Math.random()+.4,a:Math.random(),s:.012*Math.random()+.004})}function getGhostSpeed(){const t=Math.floor(survivedSeconds/8);return Math.min(5.5,2.5+.35*t)}function getSpeedLabel(){const t=Math.floor(survivedSeconds/8)+1;return`Speed ${Math.min(t,7)}`}function handleHit(){if(hitOccurred)return;hitOccurred=!0,gameActive=!1,clearInterval(surviveTimer);const t=facePos?facePos.x:canvas.width/2,e=facePos?facePos.y:canvas.height/2;for(let a=0;a<55;a++)blastParticles.push(new BlastParticle(t,e));const a=document.getElementById("hitFlash");a.classList.remove("flash"),requestAnimationFrame(()=>a.classList.add("flash")),a.addEventListener("animationend",()=>a.classList.remove("flash"),{once:!0});const s=document.getElementById("youreOut");s.classList.add("show"),setTimeout(()=>s.classList.remove("show"),2e3),setTimeout(()=>{cancelAnimationFrame(animFrame),showGameOver()},2e3)}function showGameOver(){const t=survivedSeconds<5?0:survivedSeconds<15?1:survivedSeconds<30?2:survivedSeconds<60?3:4;document.getElementById("finalScore").textContent=survivedSeconds,document.getElementById("finalMsg").textContent=["üëª Caught so fast!","‚≠ê Good dodge!","üéâ Nice moves!","üèÜ Superstar dodger!","üëë Ghost Champion!"][t],document.getElementById("goEmoji").textContent=["üò±","‚≠ê","üéâ","üèÜ","üëë"][t],document.getElementById("gameover").classList.add("show")}function drawFaceRing(t){const e=1+.06*Math.sin(3*globalPhase),a=t.r*e+14;ctx.save(),ctx.beginPath(),ctx.arc(t.x,t.y,a,0,2*Math.PI),ctx.strokeStyle=`rgba(255,220,60,${.5+.2*Math.sin(3*globalPhase)})`,ctx.lineWidth=3,ctx.setLineDash([10,5]),ctx.lineDashOffset=30*-globalPhase,ctx.stroke(),ctx.setLineDash([]),ctx.restore()}function gameLoop(){animFrame=requestAnimationFrame(gameLoop),globalPhase+=.018;const t=canvas.width,e=canvas.height;ctx.clearRect(0,0,t,e),ctx.fillStyle="rgba(10,14,46,0.2)",ctx.fillRect(0,0,t,e),bgStars.forEach(t=>{t.a+=t.s*(Math.random()>.5?1:-1),t.a=Math.max(.04,Math.min(.75,t.a)),ctx.beginPath(),ctx.arc(t.x,t.y,t.r,0,2*Math.PI),ctx.fillStyle=`rgba(255,255,255,${t.a})`,ctx.fill()});const a=facePos||{x:t/2,y:e/2},s=facePos?getGhostSpeed():.3*getGhostSpeed();facePos&&drawFaceRing(facePos),hitOccurred||(ghosts.forEach(t=>{t.update(a.x,a.y,s),gameActive&&facePos&&t.hitsFace(facePos)&&handleHit()}),document.getElementById("speedBadge").textContent=getSpeedLabel()),ghosts.forEach(t=>t.draw(ctx)),blastParticles.forEach(t=>{t.update(),t.draw(ctx)}),blastParticles=blastParticles.filter(t=>t.alpha>0)}function clamp(t,e,a){return Math.max(t,Math.min(a,e))}function showCountdown(){return new Promise(t=>{const e=document.getElementById("countdown"),a=document.getElementById("countNum");e.classList.add("show");let s=3;a.textContent=s;const i=()=>{s--,s<=0?(a.textContent="GO! üëª",setTimeout(()=>{e.classList.remove("show"),t()},700)):(a.textContent=s,a.style.animation="none",requestAnimationFrame(()=>requestAnimationFrame(()=>a.style.animation="countPop .5s cubic-bezier(.34,1.56,.64,1)")),setTimeout(i,1e3))};a.style.animation="none",requestAnimationFrame(()=>requestAnimationFrame(()=>a.style.animation="countPop .5s cubic-bezier(.34,1.56,.64,1)")),setTimeout(i,1e3)})}async function setupCamera(){const t=document.getElementById("loadingMsg");try{t.textContent="Starting your webcam...";const e=await navigator.mediaDevices.getUserMedia({video:{width:1280,height:720,facingMode:"user"},audio:!1});video.srcObject=e,await new Promise(t=>{video.onloadedmetadata=t}),await video.play(),video.classList.add("visible"),t.textContent="Loading face tracking AI... ü§ñ",initFaceDetection(),mpCamera=new Camera(video,{onFrame:async()=>{faceDetector&&await faceDetector.send({image:video})},width:1280,height:720}),await mpCamera.start(),resizeCanvas(),window.addEventListener("resize",resizeCanvas),t.textContent="Almost ready... üëª",await new Promise(t=>setTimeout(t,1800)),document.getElementById("loading").style.display="none",await showCountdown(),beginPlay()}catch(t){console.error(t),document.getElementById("loading").style.display="none",document.getElementById("permError").classList.add("show")}}function resizeCanvas(){canvas.width=window.innerWidth,canvas.height=window.innerHeight,initBgStars()}function beginPlay(){survivedSeconds=0,gameActive=!0,hitOccurred=!1,blastParticles=[],facePos=null,document.getElementById("surviveVal").textContent="0",document.getElementById("speedBadge").textContent="Speed 1",document.getElementById("gameover").classList.remove("show");const t=["left","right","top","bottom"].sort(()=>Math.random()-.5);ghosts=[new Ghost({...GHOST_CONFIGS[0],edge:t[0]}),new Ghost({...GHOST_CONFIGS[1],edge:t[1]})],clearInterval(surviveTimer),surviveTimer=setInterval(()=>{survivedSeconds++,document.getElementById("surviveVal").textContent=survivedSeconds},1e3),gameLoop()}function restartGame(){document.getElementById("gameover").classList.remove("show"),cancelAnimationFrame(animFrame),beginPlay()}function goHome(){clearInterval(surviveTimer),cancelAnimationFrame(animFrame),window.location.href="index.html"}function retryCamera(){document.getElementById("permError").classList.remove("show"),document.getElementById("loading").style.display="flex",setupCamera()}window.addEventListener("load",()=>{setupCamera()})</script></body></html>